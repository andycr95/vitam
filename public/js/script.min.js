!function(o){"use strict";o("#sidebarToggle, #sidebarToggleTop").on("click",function(e){o("body").toggleClass("sidebar-toggled"),o(".sidebar").toggleClass("toggled"),o(".sidebar").hasClass("toggled")&&o(".sidebar .collapse").collapse("hide")}),o(window).resize(function(){o(window).width()<768&&o(".sidebar .collapse").collapse("hide")}),o("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){if(o(window).width()>768){var l=e.originalEvent,t=l.wheelDelta||-l.detail;this.scrollTop+=30*(t<0?1:-1),e.preventDefault()}}),o(document).on("scroll",function(){o(this).scrollTop()>100?o(".scroll-to-top").fadeIn():o(".scroll-to-top").fadeOut()}),o(document).on("click","a.scroll-to-top",function(e){var l=o(this);o("html, body").stop().animate({scrollTop:o(l.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()})}(jQuery);


$('#drop').click(function (e) {
    ok = document.getElementById('drop').attributes.getNamedItem('aria-expanded').value
    if (ok == 'false') {
        ok2 = document.getElementById('drop').attributes.getNamedItem('aria-expanded').value = false
        break
    }
})


  $('*[data-content]').hover(function() {
    var e = $(this);
    e.off('hover');
    $.get(e.data('content'), function(d) {
        e.popover({
            content: d
        }).popover('show');
    });
});


$.ajax({
    method: 'GET',
    url: 'https://vitamventure.com/api/notifications',
    success: function(x) {
        if (x.length > 0) {
            document.getElementById('badge').innerHTML = x.length
            
            for (let i = 0; i < x.length; i++) {
                const e = x[i];
                console.log(moment().startOf(e.created_at).fromNow())
                $(`<a class="d-flex align-items-center dropdown-item" href="#">
                <div class="mr-3">
                    <div class="bg-danger icon-circle"><i class="fas fa-exclamation-triangle text-white"></i></div>
                </div>
                    <p>Alerta de mora: El vehiculo de placa ${e.placa} no recibe pagos desde el dia ${e.created_at}. Comuniquese con el cliente ${e.client.name} ${e.client.last_name}.</p>
                </div>
            </a>`).appendTo('#notifications');

            }
        }

    }
})
 